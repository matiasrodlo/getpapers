{% extends "base.html" %} {% block content %}
<h1>Download PDFs</h1>
<form id="downloadForm">
  <label for="doi_file">DOI File:</label>
  <input type="text" id="doi_file" name="doi_file" value="{{ default_doi }}" />
  <button type="submit" id="startButton">Start Download</button>
</form>

<!-- Download message -->
<p id="downloadMessage" style="display: none; color: #555; margin-top: 10px">
  ‚è≥ Download in progress...
</p>

<!-- Back Button -->
<div class="button-container" style="justify-content: center; margin-top: 20px">
  <a class="button" href="{{ url_for('index') }}">Back to Home</a>
</div>

<script>
  document
    .getElementById("downloadForm")
    .addEventListener("submit", function (e) {
      e.preventDefault();
      let formData = new FormData(e.target);

      document.getElementById("startButton").style.display = "none";
      document.getElementById("downloadMessage").style.display = "block";

      fetch("{{ url_for('start_download') }}", {
        method: "POST",
        body: formData,
      }).then((response) => response.json());
    });
</script>
{% endblock %}
